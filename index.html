<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English-Thai Vocabulary Flashcards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="manage.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;600&family=Poppins:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Poppins', 'Noto Sans Thai', sans-serif;
        }
        
        .flashcard {
            transform-style: preserve-3d;
            transition: transform 0.6s;
            perspective: 1000px;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-face {
            backface-visibility: hidden;
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
        }
        
        .word-highlight {
            background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
            background-size: 200% 200%;
            animation: gradient 3s ease infinite;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .pronunciation-icon {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pronunciation-icon:hover {
            transform: scale(1.1);
            color: #3b82f6;
        }
        
        .category-badge {
            transition: all 0.3s;
        }
        
        .category-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-indigo-700 mb-2">English-Thai Vocabulary Flashcards</h1>
            <p class="text-gray-600">Master Thai vocabulary with interactive flashcards</p>
            
            <div class="flex justify-center space-x-2 mt-6">
                <span class="category-badge bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">Flashcards</span>
                <span class="category-badge bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">Pronunciation</span>
                <span class="category-badge bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Examples</span>
            </div>
        </header>

        <!-- Main Content -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
            <!-- Tabs -->
            <div class="flex border-b">
                <button id="flashcards-tab-btn" class="tab-btn active px-6 py-3 font-medium text-indigo-700 border-b-2 border-indigo-700 bg-indigo-50">
                    <i class="fas fa-clone mr-2"></i> Flashcards
                </button>
                <button id="wordlist-tab-btn" class="tab-btn px-6 py-3 font-medium text-gray-500 hover:text-gray-700">
                    <i class="fas fa-list-ul mr-2"></i> Word List
                </button>
                <button id="stats-tab-btn" class="tab-btn px-6 py-3 font-medium text-gray-500 hover:text-gray-700">
                    <i class="fas fa-chart-bar mr-2"></i> Progress
                </button>
                <button id="admin-tab-btn" class="tab-btn px-6 py-3 font-medium text-gray-500 hover:text-gray-700">
                    <i class="fas fa-cog mr-2"></i> Admin
                </button>
            </div>
            
            <!-- Flashcards Tab Content -->
            <div id="flashcards-tab" class="tab-content p-6">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                    <div class="w-full md:w-auto mb-4 md:mb-0">
                        <label for="category-select" class="block text-sm font-medium text-gray-700 mb-1">Filter by category:</label>
                        <select id="category-select" class="block w-full md:w-48 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border">
                            <option value="all">All Categories</option>
                            <option value="basics">Basic Words</option>
                            <option value="food">Food & Dining</option>
                            <option value="travel">Travel</option>
                            <option value="business">Business</option>
                            <option value="academic">Academic</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="text-sm font-medium text-gray-700">
                            Card <span id="current-card" class="text-indigo-600">1</span> of <span id="total-cards" class="text-indigo-600">0</span>
                        </div>
                        <div class="flex space-x-2">
                            <button id="shuffle-btn" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-700" aria-label="Shuffle cards">
                                <i class="fas fa-random"></i>
                            </button>
                            <button id="bookmark-btn" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-700" aria-label="Bookmark card">
                                <i class="far fa-bookmark"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Flashcard -->
                <div class="flashcard-container mb-8">
                    <div class="flashcard relative w-full h-80 md:h-96 mx-auto cursor-pointer" id="flashcard">
                        <!-- Front of Card -->
                        <div class="flashcard-face absolute w-full h-full bg-white rounded-xl shadow-md p-8 flex flex-col justify-center items-center">
                            <div class="text-center">
                                <div class="word-highlight inline-block px-4 py-2 rounded-lg mb-4">
                                    <span id="english-word" class="text-3xl md:text-4xl font-bold text-gray-800">Word</span>
                                </div>
                                <div class="flex justify-center items-center mb-6">
                                    <span id="english-pronunciation" class="text-xl text-gray-600 mr-2">Pronunciation</span>
                                    <i class="fas fa-volume-up pronunciation-icon text-indigo-500 text-xl"></i>
                                </div>
                                <div id="english-example" class="text-lg text-gray-700 italic">Example sentence</div>
                            </div>
                            <div class="absolute bottom-4 text-sm text-gray-400">
                                Click to flip
                                <i class="fas fa-undo ml-1"></i>
                            </div>
                        </div>
                        
                        <!-- Back of Card -->
                        <div class="flashcard-face flashcard-back absolute w-full h-full bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl shadow-md p-8 flex flex-col justify-center items-center text-white">
                            <div class="text-center">
                                <div class="inline-block px-4 py-2 rounded-lg mb-4 bg-white bg-opacity-20">
                                    <span id="thai-translation" class="text-3xl md:text-4xl font-bold">Translation</span>
                                </div>
                                <div class="flex justify-center items-center mb-6">
                                    <span id="thai-pronunciation" class="text-xl text-indigo-200 mr-2">Thai pronunciation</span>
                                    <i class="fas fa-volume-up pronunciation-icon text-indigo-300 text-xl"></i>
                                </div>
                                <div id="thai-example" class="text-lg text-indigo-100 italic">ตัวอย่างประโยค</div>
                            </div>
                            <div class="absolute bottom-4 text-sm text-indigo-200">
                                <i class="fas fa-undo mr-1"></i>
                                Click to flip back
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Controls -->
                <div class="flex justify-between">
                    <button id="prev-btn" class="flex items-center px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fas fa-arrow-left mr-2"></i> Previous
                    </button>
                    <button id="flip-btn" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                        <i class="fas fa-sync-alt mr-2"></i> Flip Card
                    </button>
                    <button id="next-btn" class="flex items-center px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Word List Tab Content -->
            <div id="wordlist-tab" class="tab-content hidden p-6">
                <div class="mb-6">
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" id="wordlist-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Search words...">
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">English</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pronunciation</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thai</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="wordlist-body" class="bg-white divide-y divide-gray-200">
                            <!-- Word list will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Stats Tab Content -->
            <div id="stats-tab" class="tab-content hidden p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-indigo-100 text-indigo-600 mr-4">
                                <i class="fas fa-book-open text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900">Total Words</h3>
                                <p id="total-words" class="text-2xl font-bold text-indigo-600">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                                <i class="fas fa-check-circle text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900">Mastered</h3>
                                <p id="mastered-words" class="text-2xl font-bold text-green-600">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                                <i class="fas fa-chart-line text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900">Practice Streak</h3>
                                <p id="practice-streak" class="text-2xl font-bold text-blue-600">0 days</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Progress by Category</h3>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                        <div class="text-center">
                            <div class="h-32 w-32 mx-auto mb-2">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#E5E7EB"
                                        stroke-width="3"
                                        stroke-dasharray="100, 100"
                                    />
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#4F46E5"
                                        stroke-width="3"
                                        stroke-dasharray="25, 100"
                                    />
                                    <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#4F46E5" font-weight="bold">25%</text>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700">Basics</span>
                        </div>
                        <div class="text-center">
                            <div class="h-32 w-32 mx-auto mb-2">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#E5E7EB"
                                        stroke-width="3"
                                        stroke-dasharray="100, 100"
                                    />
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#10B981"
                                        stroke-width="3"
                                        stroke-dasharray="60, 100"
                                    />
                                    <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#10B981" font-weight="bold">60%</text>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700">Food</span>
                        </div>
                        <div class="text-center">
                            <div class="h-32 w-32 mx-auto mb-2">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#E5E7EB"
                                        stroke-width="3"
                                        stroke-dasharray="100, 100"
                                    />
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#3B82F6"
                                        stroke-width="3"
                                        stroke-dasharray="40, 100"
                                    />
                                    <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#3B82F6" font-weight="bold">40%</text>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700">Travel</span>
                        </div>
                        <div class="text-center">
                            <div class="h-32 w-32 mx-auto mb-2">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#E5E7EB"
                                        stroke-width="3"
                                        stroke-dasharray="100, 100"
                                    />
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#F59E0B"
                                        stroke-width="3"
                                        stroke-dasharray="15, 100"
                                    />
                                    <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#F59E0B" font-weight="bold">15%</text>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700">Business</span>
                        </div>
                        <div class="text-center">
                            <div class="h-32 w-32 mx-auto mb-2">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#E5E7EB"
                                        stroke-width="3"
                                        stroke-dasharray="100, 100"
                                    />
                                    <path d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#EC4899"
                                        stroke-width="3"
                                        stroke-dasharray="10, 100"
                                    />
                                    <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#EC4899" font-weight="bold">10%</text>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700">Academic</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Admin Tab Content -->
            <div id="admin-tab" class="tab-content hidden p-6">
                <div class="mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Vocabulary Management</h2>
                    <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-6">
                        <button id="add-vocab-btn" class="flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            <i class="fas fa-plus mr-2"></i> Add New Word
                        </button>
                        <button id="manage-categories-btn" class="flex items-center justify-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            <i class="fas fa-tags mr-2"></i> Manage Categories
                        </button>
                    </div>
                    
                    <!-- Word Management Table -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">English</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thai</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-wordlist-body" class="bg-white divide-y divide-gray-200">
                                <!-- Admin word list will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Add/Edit Word Modal -->
                <div id="vocab-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-full overflow-y-auto">
                        <div class="px-6 py-4 border-b">
                            <div class="flex justify-between items-center">
                                <h3 id="modal-title" class="text-xl font-bold text-gray-800">Add New Word</h3>
                                <button id="close-vocab-modal" class="text-gray-500 hover:text-gray-700" aria-label="Close modal">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <form id="vocab-form" class="space-y-4">
                                <input type="hidden" id="word-id">
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="english-input" class="block text-sm font-medium text-gray-700 mb-1">English Word</label>
                                        <input type="text" id="english-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="English word" required>
                                    </div>
                                    
                                    <div>
                                        <label for="thai-input" class="block text-sm font-medium text-gray-700 mb-1">Thai Translation</label>
                                        <input type="text" id="thai-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="Thai translation" required>
                                    </div>
                                    
                                    <div>
                                        <label for="pronunciation-input" class="block text-sm font-medium text-gray-700 mb-1">English Pronunciation</label>
                                        <input type="text" id="pronunciation-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="English pronunciation">
                                    </div>
                                    
                                    <div>
                                        <label for="thai-pronunciation-input" class="block text-sm font-medium text-gray-700 mb-1">Thai Pronunciation</label>
                                        <input type="text" id="thai-pronunciation-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="Thai pronunciation">
                                    </div>
                                    
                                    <div>
                                        <label for="example-input" class="block text-sm font-medium text-gray-700 mb-1">English Example</label>
                                        <input type="text" id="example-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="Example sentence">
                                    </div>
                                    
                                    <div>
                                        <label for="thai-example-input" class="block text-sm font-medium text-gray-700 mb-1">Thai Example</label>
                                        <input type="text" id="thai-example-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="Thai example sentence">
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="category-input" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                                    <select id="category-input" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" required>
                                        <option value="">Select a category</option>
                                        <option value="basics">Basic Words</option>
                                        <option value="food">Food & Dining</option>
                                        <option value="travel">Travel</option>
                                        <option value="business">Business</option>
                                        <option value="academic">Academic</option>
                                    </select>
                                </div>
                                
                                <div class="flex justify-between space-x-4 pt-4">
                                    <button type="button" id="cancel-vocab-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                                        Cancel
                                    </button>
                                    <button type="submit" id="save-vocab-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                                        Save Word
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Category Management Modal -->
                <div id="category-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4">
                        <div class="px-6 py-4 border-b">
                            <div class="flex justify-between items-center">
                                <h3 class="text-xl font-bold text-gray-800">Manage Categories</h3>
                                <button id="close-category-modal" class="text-gray-500 hover:text-gray-700" aria-label="Close modal">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex mb-4">
                                <input type="text" id="new-category-input" class="block w-full rounded-l-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border" placeholder="New category name">
                                <button id="add-category-btn" class="bg-indigo-600 text-white rounded-r-md px-4 hover:bg-indigo-700" aria-label="Add category">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            
                            <ul id="category-list" class="space-y-2">
                                <!-- Categories will be populated here -->
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Delete Confirmation Modal -->
                <div id="delete-confirm-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
                        <div class="px-6 py-4 border-b">
                            <div class="flex justify-between items-center">
                                <h3 class="text-xl font-bold text-gray-800">Confirm Deletion</h3>
                                <button id="close-delete-modal" class="text-gray-500 hover:text-gray-700" aria-label="Close modal">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <p id="delete-message" class="text-gray-700 mb-6">Are you sure you want to delete this item?</p>
                            
                            <div class="flex justify-end space-x-4">
                                <button id="cancel-delete-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                                    Cancel
                                </button>
                                <button id="confirm-delete-btn" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mt-12">
            <p>English-Thai Vocabulary Flashcards © 2025 | Made with <i class="fas fa-heart text-red-400"></i> for language learners</p>
        </footer>
    </div>

    <script>
        // Vocabulary database
        const vocabulary = [
            // Basic Words
            { 
                english: "Hello", 
                pronunciation: "ha-'lō", 
                thai: "สวัสดี", 
                thaiPronunciation: "sà-wàt-dee", 
                category: "basics",
                example: "Hello, how are you?",
                thaiExample: "สวัสดี คุณเป็นอย่างไรบ้าง?",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Thank you", 
                pronunciation: "'thaŋk-yü", 
                thai: "ขอบคุณ", 
                thaiPronunciation: "kòp-kun", 
                category: "basics",
                example: "Thank you for your help.",
                thaiExample: "ขอบคุณสำหรับความช่วยเหลือของคุณ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Goodbye", 
                pronunciation: "gud-'bī", 
                thai: "ลาก่อน", 
                thaiPronunciation: "laa-gòn", 
                category: "basics",
                example: "Goodbye, see you tomorrow!",
                thaiExample: "ลาก่อน พรุ่งนี้เจอกัน!",
                mastered: false,
                bookmarked: true
            },
            { 
                english: "Yes", 
                pronunciation: "yes", 
                thai: "ใช่", 
                thaiPronunciation: "châi", 
                category: "basics",
                example: "Yes, I understand.",
                thaiExample: "ใช่ ฉันเข้าใจ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "No", 
                pronunciation: "nō", 
                thai: "ไม่", 
                thaiPronunciation: "mâi", 
                category: "basics",
                example: "No, thank you.",
                thaiExample: "ไม่ ขอบคุณ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Please", 
                pronunciation: "plēz", 
                thai: "กรุณา", 
                thaiPronunciation: "gà-rú-naa", 
                category: "basics",
                example: "Please help me.",
                thaiExample: "กรุณาช่วยฉันด้วย",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Sorry", 
                pronunciation: "'sär-ē", 
                thai: "ขอโทษ", 
                thaiPronunciation: "kŏr tôht", 
                category: "basics",
                example: "I'm sorry for being late.",
                thaiExample: "ขอโทษที่มาสาย",
                mastered: false,
                bookmarked: false
            },
            
            // Food & Dining
            { 
                english: "Restaurant", 
                pronunciation: "'re-stə-ˌränt", 
                thai: "ร้านอาหาร", 
                thaiPronunciation: "ráan-aa-hăan", 
                category: "food",
                example: "Let's meet at the restaurant at 7pm.",
                thaiExample: "เจอกันที่ร้านอาหารตอนหนึ่งทุ่มนะ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Spicy", 
                pronunciation: "'spī-sē", 
                thai: "เผ็ด", 
                thaiPronunciation: "pèt", 
                category: "food",
                example: "Thai food is often very spicy.",
                thaiExample: "อาหารไทยมักจะเผ็ดมาก",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Delicious", 
                pronunciation: "di-'li-shəs", 
                thai: "อร่อย", 
                thaiPronunciation: "a-ròi", 
                category: "food",
                example: "This dish is delicious!",
                thaiExample: "จานนี้อร่อยมาก!",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Water", 
                pronunciation: "'wȯ-tər", 
                thai: "น้ำ", 
                thaiPronunciation: "náam", 
                category: "food",
                example: "Can I have some water, please?",
                thaiExample: "ขอน้ำหน่อยได้ไหมครับ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Rice", 
                pronunciation: "rīs", 
                thai: "ข้าว", 
                thaiPronunciation: "kâao", 
                category: "food",
                example: "I eat rice every day.",
                thaiExample: "ฉันกินข้าวทุกวัน",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Noodles", 
                pronunciation: "'nü-dəlz", 
                thai: "ก๋วยเตี๋ยว", 
                thaiPronunciation: "gŭay-dtĭeow", 
                category: "food",
                example: "I love Thai noodles.",
                thaiExample: "ฉันชอบก๋วยเตี๋ยวไทย",
                mastered: false,
                bookmarked: true
            },
            
            // Travel
            { 
                english: "Airport", 
                pronunciation: "'er-ˌpȯrt", 
                thai: "สนามบิน", 
                thaiPronunciation: "sà-năam-bin", 
                category: "travel",
                example: "We need to go to the airport early.",
                thaiExample: "เราต้องไปสนามบินแต่เช้า",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Hotel", 
                pronunciation: "hō-'tel", 
                thai: "โรงแรม", 
                thaiPronunciation: "rohng-raem", 
                category: "travel",
                example: "The hotel has a swimming pool.",
                thaiExample: "โรงแรมมีสระว่ายน้ำ",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Ticket", 
                pronunciation: "'ti-kət", 
                thai: "ตั๋ว", 
                thaiPronunciation: "dtŭa", 
                category: "travel",
                example: "I need to buy a train ticket.",
                thaiExample: "ฉันต้องซื้อตั๋วรถไฟ",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Beach", 
                pronunciation: "bēch", 
                thai: "ชายหาด", 
                thaiPronunciation: "chaai-hàat", 
                category: "travel",
                example: "Let's go to the beach tomorrow.",
                thaiExample: "พรุ่งนี้เราไปชายหาดกันเถอะ",
                mastered: true,
                bookmarked: false
            },
            { 
                english: "Taxi", 
                pronunciation: "'tak-sē", 
                thai: "แท็กซี่", 
                thaiPronunciation: "táek-sêe", 
                category: "travel",
                example: "Can you call a taxi for me?",
                thaiExample: "ช่วยเรียกแท็กซี่ให้ฉันหน่อยได้ไหม",
                mastered: false,
                bookmarked: true
            },
            
            // Business
            { 
                english: "Meeting", 
                pronunciation: "'mē-tiŋ", 
                thai: "การประชุม", 
                thaiPronunciation: "gaan-bprà-chum", 
                category: "business",
                example: "We have a meeting at 2pm.",
                thaiExample: "เรามีการประชุมตอนบ่ายสองโมง",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Contract", 
                pronunciation: "'kän-ˌtrakt", 
                thai: "สัญญา", 
                thaiPronunciation: "sǎn-yaa", 
                category: "business",
                example: "Please review the contract before signing.",
                thaiExample: "กรุณาตรวจสอบสัญญาก่อนลงนาม",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Price", 
                pronunciation: "prīs", 
                thai: "ราคา", 
                thaiPronunciation: "raa-kaa", 
                category: "business",
                example: "What's the price for this product?",
                thaiExample: "สินค้านี้ราคาเท่าไหร่",
                mastered: true,
                bookmarked: false
            },
            
            // Academic
            { 
                english: "University", 
                pronunciation: "yü-nə-'vər-sə-tē", 
                thai: "มหาวิทยาลัย", 
                thaiPronunciation: "má-hăa-wít-thá-yaa-lai", 
                category: "academic",
                example: "She studies at Chulalongkorn University.",
                thaiExample: "เธอเรียนที่มหาวิทยาลัยจุฬาลงกรณ์",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Research", 
                pronunciation: "rē-'sərch", 
                thai: "การวิจัย", 
                thaiPronunciation: "gaan-wí-jai", 
                category: "academic",
                example: "He is doing research on Thai history.",
                thaiExample: "เขากำลังทำวิจัยเกี่ยวกับประวัติศาสตร์ไทย",
                mastered: false,
                bookmarked: false
            },
            { 
                english: "Student", 
                pronunciation: "'stü-dənt", 
                thai: "นักเรียน", 
                thaiPronunciation: "nák-riian", 
                category: "academic",
                example: "I am a student at Bangkok University.",
                thaiExample: "ฉันเป็นนักเรียนที่มหาวิทยาลัยกรุงเทพ",
                mastered: true,
                bookmarked: false
            }
        ];

        // App state
        let currentCardIndex = 0;
        let filteredVocabulary = [...vocabulary];
        let practiceStreak = 0;
        let lastPracticeDate = new Date().toDateString();

        // DOM elements
        const flashcard = document.getElementById('flashcard');
        const englishWord = document.getElementById('english-word');
        const englishPronunciation = document.getElementById('english-pronunciation');
        const englishExample = document.getElementById('english-example');
        const thaiTranslation = document.getElementById('thai-translation');
        const thaiPronunciation = document.getElementById('thai-pronunciation');
        const thaiExample = document.getElementById('thai-example');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const flipBtn = document.getElementById('flip-btn');
        const currentCardDisplay = document.getElementById('current-card');
        const totalCardsDisplay = document.getElementById('total-cards');
        const categorySelect = document.getElementById('category-select');
        const wordlistBody = document.getElementById('wordlist-body');
        const wordlistSearch = document.getElementById('wordlist-search');
        const bookmarkBtn = document.getElementById('bookmark-btn');
        const shuffleBtn = document.getElementById('shuffle-btn');
        const totalWordsDisplay = document.getElementById('total-words');
        const masteredWordsDisplay = document.getElementById('mastered-words');
        const practiceStreakDisplay = document.getElementById('practice-streak');
        
        // Tab elements
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        // Local Storage functions
        function saveToLocalStorage() {
            localStorage.setItem('vocabulary', JSON.stringify(vocabulary));
            localStorage.setItem('practiceStreak', practiceStreak);
            localStorage.setItem('lastPracticeDate', lastPracticeDate);
        }
        
        function loadFromLocalStorage() {
            const savedVocabulary = localStorage.getItem('vocabulary');
            if (savedVocabulary) {
                // Clear the current vocabulary array
                vocabulary.length = 0;
                
                // Add all words from local storage
                const parsedVocabulary = JSON.parse(savedVocabulary);
                parsedVocabulary.forEach(word => vocabulary.push(word));
            }
            
            const savedStreak = localStorage.getItem('practiceStreak');
            if (savedStreak) {
                practiceStreak = parseInt(savedStreak);
            }
            
            const savedDate = localStorage.getItem('lastPracticeDate');
            if (savedDate) {
                lastPracticeDate = savedDate;
            }
        }

        // Initialize the app
        function init() {
            loadFromLocalStorage();
            updateFilteredVocabulary();
            updateCardDisplay();
            updateWordList();
            updateNavigationButtons();
            updateStats();
            checkPracticeStreak();
            updateAdminWordList();

            // Event listeners
            flashcard.addEventListener('click', flipCard);
            flipBtn.addEventListener('click', flipCard);
            prevBtn.addEventListener('click', showPreviousCard);
            nextBtn.addEventListener('click', showNextCard);
            categorySelect.addEventListener('change', handleCategoryChange);
            wordlistSearch.addEventListener('input', handleWordlistSearch);
            bookmarkBtn.addEventListener('click', toggleBookmark);
            shuffleBtn.addEventListener('click', shuffleCards);
            
            // Admin functionality event listeners
            document.getElementById('add-vocab-btn').addEventListener('click', openAddVocabModal);
            document.getElementById('manage-categories-btn').addEventListener('click', openCategoryModal);
            document.getElementById('close-vocab-modal').addEventListener('click', closeVocabModal);
            document.getElementById('cancel-vocab-btn').addEventListener('click', closeVocabModal);
            document.getElementById('vocab-form').addEventListener('submit', saveVocabulary);
            document.getElementById('close-category-modal').addEventListener('click', closeCategoryModal);
            document.getElementById('add-category-btn').addEventListener('click', addNewCategory);
            document.getElementById('close-delete-modal').addEventListener('click', closeDeleteModal);
            document.getElementById('cancel-delete-btn').addEventListener('click', closeDeleteModal);
            document.getElementById('confirm-delete-btn').addEventListener('click', confirmDelete);
            
            // Pronunciation buttons
            document.querySelectorAll('.pronunciation-icon').forEach(icon => {
                icon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const word = e.target.closest('.flex').querySelector('span').textContent;
                    speakWord(word);
                });
            });

            // Tab switching
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.id.replace('-tab-btn', '');
                    switchTab(tabId);
                });
            });
        }

        // Filter vocabulary based on selected category
        function updateFilteredVocabulary() {
            const selectedCategory = categorySelect.value;
            
            if (selectedCategory === 'all') {
                filteredVocabulary = [...vocabulary];
            } else {
                filteredVocabulary = vocabulary.filter(word => word.category === selectedCategory);
            }
            
            currentCardIndex = 0;
            updateCardDisplay();
            updateNavigationButtons();
        }

        // Update the displayed card with current vocabulary
        function updateCardDisplay() {
            if (filteredVocabulary.length === 0) {
                englishWord.textContent = "No words available";
                englishPronunciation.textContent = "";
                englishExample.textContent = "";
                thaiTranslation.textContent = "";
                thaiPronunciation.textContent = "";
                thaiExample.textContent = "";
                return;
            }
            
            const currentWord = filteredVocabulary[currentCardIndex];
            
            englishWord.textContent = currentWord.english;
            englishPronunciation.textContent = currentWord.pronunciation;
            englishExample.textContent = currentWord.example;
            thaiTranslation.textContent = currentWord.thai;
            thaiPronunciation.textContent = currentWord.thaiPronunciation;
            thaiExample.textContent = currentWord.thaiExample;
            
            // Update bookmark button
            updateBookmarkButton(currentWord.bookmarked);
            
            // Reset card to front
            if (flashcard.classList.contains('flipped')) {
                flashcard.classList.remove('flipped');
            }
            
            // Update progress display
            currentCardDisplay.textContent = currentCardIndex + 1;
            totalCardsDisplay.textContent = filteredVocabulary.length;
        }

        // Flip the card
        function flipCard() {
            flashcard.classList.toggle('flipped');
            
            // Update practice streak if this is the first card flip today
            const today = new Date().toDateString();
            if (lastPracticeDate !== today) {
                practiceStreak++;
                lastPracticeDate = today;
                updateStats();
                
                // Save updated streak to local storage
                saveToLocalStorage();
            }
        }

        // Show previous card
        function showPreviousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateCardDisplay();
                updateNavigationButtons();
            }
        }

        // Show next card
        function showNextCard() {
            if (currentCardIndex < filteredVocabulary.length - 1) {
                currentCardIndex++;
                updateCardDisplay();
                updateNavigationButtons();
            }
        }

        // Update navigation buttons state
        function updateNavigationButtons() {
            prevBtn.disabled = currentCardIndex === 0;
            nextBtn.disabled = currentCardIndex === filteredVocabulary.length - 1;
        }

        // Handle category change
        function handleCategoryChange() {
            updateFilteredVocabulary();
        }

        // Update word list table
        function updateWordList() {
            wordlistBody.innerHTML = '';
            
            vocabulary.forEach((word, index) => {
                const row = document.createElement('tr');
                row.className = word.mastered ? 'bg-green-50' : 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900">${word.english}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-500">${word.pronunciation}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${word.thai}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            ${getCategoryColor(word.category)}">
                            ${word.category.charAt(0).toUpperCase() + word.category.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900 mr-3 view-word-btn" data-index="${index}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="text-green-600 hover:text-green-900 mr-3 mastered-btn" data-index="${index}">
                            <i class="fas ${word.mastered ? 'fa-check-circle' : 'fa-circle'}"></i>
                        </button>
                        <button class="text-yellow-600 hover:text-yellow-900 bookmark-btn" data-index="${index}">
                            <i class="fas ${word.bookmarked ? 'fa-bookmark' : 'fa-bookmark'} ${word.bookmarked ? 'text-yellow-500' : 'text-gray-300'}"></i>
                        </button>
                    </td>
                `;
                
                wordlistBody.appendChild(row);
            });
            
            // Add event listeners to word list buttons
            document.querySelectorAll('.view-word-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    viewWordFromList(index);
                });
            });
            
            document.querySelectorAll('.mastered-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    toggleMastered(index);
                });
            });
            
            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    toggleBookmarkFromList(index);
                });
            });
        }

        // Get color for category badge
        function getCategoryColor(category) {
            switch(category) {
                case 'basics': return 'bg-blue-100 text-blue-800';
                case 'food': return 'bg-green-100 text-green-800';
                case 'travel': return 'bg-yellow-100 text-yellow-800';
                case 'business': return 'bg-purple-100 text-purple-800';
                case 'academic': return 'bg-pink-100 text-pink-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // Handle word list search
        function handleWordlistSearch() {
            const searchTerm = wordlistSearch.value.toLowerCase();
            
            if (searchTerm === '') {
                updateWordList();
                return;
            }
            
            const filteredWords = vocabulary.filter(word => 
                word.english.toLowerCase().includes(searchTerm) || 
                word.thai.includes(searchTerm) ||
                word.pronunciation.toLowerCase().includes(searchTerm)
            );
            
            wordlistBody.innerHTML = '';
            
            filteredWords.forEach((word, index) => {
                const row = document.createElement('tr');
                row.className = word.mastered ? 'bg-green-50' : 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900">${word.english}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-500">${word.pronunciation}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${word.thai}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            ${getCategoryColor(word.category)}">
                            ${word.category.charAt(0).toUpperCase() + word.category.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900 mr-3 view-word-btn" data-index="${index}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="text-green-600 hover:text-green-900 mr-3 mastered-btn" data-index="${index}">
                            <i class="fas ${word.mastered ? 'fa-check-circle' : 'fa-circle'}"></i>
                        </button>
                        <button class="text-yellow-600 hover:text-yellow-900 bookmark-btn" data-index="${index}">
                            <i class="fas ${word.bookmarked ? 'fa-bookmark' : 'fa-bookmark'} ${word.bookmarked ? 'text-yellow-500' : 'text-gray-300'}"></i>
                        </button>
                    </td>
                `;
                
                wordlistBody.appendChild(row);
            });
            
            // Add event listeners to filtered word list buttons
            document.querySelectorAll('.view-word-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    viewWordFromList(index);
                });
            });
            
            document.querySelectorAll('.mastered-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    toggleMastered(index);
                });
            });
            
            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    toggleBookmarkFromList(index);
                });
            });
        }

        // View word from word list
        function viewWordFromList(index) {
            const word = vocabulary[index];
            
            // Find the word in the filtered vocabulary
            const wordIndex = filteredVocabulary.findIndex(w => w.english === word.english);
            
            if (wordIndex !== -1) {
                currentCardIndex = wordIndex;
            } else {
                // If word not in current filtered list, change category to all
                categorySelect.value = 'all';
                updateFilteredVocabulary();
                
                // Find the word again in the full list
                const newWordIndex = filteredVocabulary.findIndex(w => w.english === word.english);
                if (newWordIndex !== -1) {
                    currentCardIndex = newWordIndex;
                }
            }
            
            updateCardDisplay();
            updateNavigationButtons();
            switchTab('flashcards');
        }

        // Toggle mastered status
        function toggleMastered(index) {
            vocabulary[index].mastered = !vocabulary[index].mastered;
            updateWordList();
            updateStats();
            
            // If current card is mastered, update the filtered vocabulary
            if (filteredVocabulary[currentCardIndex] && 
                filteredVocabulary[currentCardIndex].english === vocabulary[index].english) {
                filteredVocabulary[currentCardIndex].mastered = vocabulary[index].mastered;
            }
            
            // Save to local storage
            saveToLocalStorage();
        }

        // Toggle bookmark status
        function toggleBookmark() {
            if (filteredVocabulary.length === 0) return;
            
            const currentWord = filteredVocabulary[currentCardIndex];
            const vocabIndex = vocabulary.findIndex(w => w.english === currentWord.english);
            
            if (vocabIndex !== -1) {
                vocabulary[vocabIndex].bookmarked = !vocabulary[vocabIndex].bookmarked;
                currentWord.bookmarked = vocabulary[vocabIndex].bookmarked;
                updateBookmarkButton(currentWord.bookmarked);
                updateWordList();
                
                // Save to local storage
                saveToLocalStorage();
            }
        }

        // Toggle bookmark from word list
        function toggleBookmarkFromList(index) {
            vocabulary[index].bookmarked = !vocabulary[index].bookmarked;
            updateWordList();
            
            // If current card is bookmarked, update the filtered vocabulary
            if (filteredVocabulary[currentCardIndex] && 
                filteredVocabulary[currentCardIndex].english === vocabulary[index].english) {
                filteredVocabulary[currentCardIndex].bookmarked = vocabulary[index].bookmarked;
                updateBookmarkButton(filteredVocabulary[currentCardIndex].bookmarked);
            }
            
            // Save to local storage
            saveToLocalStorage();
        }

        // Update bookmark button appearance
        function updateBookmarkButton(isBookmarked) {
            const icon = bookmarkBtn.querySelector('i');
            if (isBookmarked) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-yellow-500');
            } else {
                icon.classList.remove('fas', 'text-yellow-500');
                icon.classList.add('far');
            }
        }

        // Shuffle cards
        function shuffleCards() {
            if (filteredVocabulary.length === 0) return;
            
            // Fisher-Yates shuffle algorithm
            for (let i = filteredVocabulary.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [filteredVocabulary[i], filteredVocabulary[j]] = [filteredVocabulary[j], filteredVocabulary[i]];
            }
            
            currentCardIndex = 0;
            updateCardDisplay();
            updateNavigationButtons();
        }

        // Switch between tabs
        function switchTab(tabId) {
            // Update active tab button
            tabBtns.forEach(btn => {
                if (btn.id === `${tabId}-tab-btn`) {
                    btn.classList.add('active', 'text-indigo-700', 'border-indigo-700', 'bg-indigo-50');
                    btn.classList.remove('text-gray-500', 'hover:text-gray-700');
                } else {
                    btn.classList.remove('active', 'text-indigo-700', 'border-indigo-700', 'bg-indigo-50');
                    btn.classList.add('text-gray-500', 'hover:text-gray-700');
                }
            });
            
            // Show corresponding content
            tabContents.forEach(content => {
                if (content.id === `${tabId}-tab`) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        }

        // Update stats
        function updateStats() {
            totalWordsDisplay.textContent = vocabulary.length;
            masteredWordsDisplay.textContent = vocabulary.filter(word => word.mastered).length;
            practiceStreakDisplay.textContent = `${practiceStreak} ${practiceStreak === 1 ? 'day' : 'days'}`;
        }

        // Check and update practice streak
        function checkPracticeStreak() {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            // Check if there's a saved streak in localStorage first
            const savedStreak = localStorage.getItem('practiceStreak');
            const savedDate = localStorage.getItem('lastPracticeDate');
            
            if (savedStreak && savedDate) {
                practiceStreak = parseInt(savedStreak);
                lastPracticeDate = savedDate;
                
                // Check if we need to update the streak
                const today = new Date().toDateString();
                if (lastPracticeDate !== today) {
                    // Reset streak if more than a day has passed since last practice
                    const lastDate = new Date(lastPracticeDate);
                    const diffDays = Math.floor((today - lastDate) / (1000 * 60 * 60 * 24));
                    
                    if (diffDays > 1) {
                        practiceStreak = 1; // Reset streak
                    } else if (diffDays === 1) {
                        practiceStreak++; // Increase streak by 1
                    }
                    
                    lastPracticeDate = today;
                    saveToLocalStorage();
                }
            } else {
                // For demo purposes, we'll just set a random streak if no data exists
                practiceStreak = Math.floor(Math.random() * 10) + 1;
                lastPracticeDate = today.toDateString();
                saveToLocalStorage();
            }
            
            updateStats();
        }

        // Text-to-speech for pronunciation
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            } else {
                alert('Text-to-speech is not supported in your browser.');
            }
        }

        // Admin functionality
        
        // Admin word list management
        function updateAdminWordList() {
            const adminWordlistBody = document.getElementById('admin-wordlist-body');
            adminWordlistBody.innerHTML = '';
            
            vocabulary.forEach((word, index) => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${word.english}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${word.thai}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            ${getCategoryColor(word.category)}">
                            ${word.category.charAt(0).toUpperCase() + word.category.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900 mr-3 edit-word-btn" data-index="${index}" aria-label="Edit word">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-600 hover:text-red-900 delete-word-btn" data-index="${index}" aria-label="Delete word">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                adminWordlistBody.appendChild(row);
            });
            
            // Add event listeners to admin word list buttons
            document.querySelectorAll('.edit-word-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    openEditVocabModal(index);
                });
            });
            
            document.querySelectorAll('.delete-word-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').getAttribute('data-index'));
                    openDeleteWordModal(index);
                });
            });
        }
        
        // Open add vocabulary modal
        function openAddVocabModal() {
            document.getElementById('modal-title').textContent = 'Add New Word';
            document.getElementById('vocab-form').reset();
            document.getElementById('word-id').value = '';
            document.getElementById('vocab-modal').classList.remove('hidden');
        }
        
        // Open edit vocabulary modal
        function openEditVocabModal(index) {
            const word = vocabulary[index];
            
            document.getElementById('modal-title').textContent = 'Edit Word';
            document.getElementById('word-id').value = index;
            document.getElementById('english-input').value = word.english;
            document.getElementById('thai-input').value = word.thai;
            document.getElementById('pronunciation-input').value = word.pronunciation;
            document.getElementById('thai-pronunciation-input').value = word.thaiPronunciation;
            document.getElementById('example-input').value = word.example;
            document.getElementById('thai-example-input').value = word.thaiExample;
            document.getElementById('category-input').value = word.category;
            
            document.getElementById('vocab-modal').classList.remove('hidden');
        }
        
        // Close vocabulary modal
        function closeVocabModal() {
            document.getElementById('vocab-modal').classList.add('hidden');
        }
        
        // Save vocabulary (add or update)
        function saveVocabulary(e) {
            e.preventDefault();
            
            const wordId = document.getElementById('word-id').value;
            const newWord = {
                english: document.getElementById('english-input').value,
                thai: document.getElementById('thai-input').value,
                pronunciation: document.getElementById('pronunciation-input').value,
                thaiPronunciation: document.getElementById('thai-pronunciation-input').value,
                example: document.getElementById('example-input').value,
                thaiExample: document.getElementById('thai-example-input').value,
                category: document.getElementById('category-input').value,
                mastered: false,
                bookmarked: false
            };
            
            if (wordId === '') {
                // Add new word
                vocabulary.push(newWord);
            } else {
                // Update existing word
                const index = parseInt(wordId);
                // Preserve mastered and bookmarked status
                newWord.mastered = vocabulary[index].mastered;
                newWord.bookmarked = vocabulary[index].bookmarked;
                vocabulary[index] = newWord;
            }
            
            // Update displays
            updateFilteredVocabulary();
            updateWordList();
            updateAdminWordList();
            updateStats();
            
            // Save to local storage
            saveToLocalStorage();
            
            // Close modal
            closeVocabModal();
        }
        
        // Open category management modal
        function openCategoryModal() {
            updateCategoryList();
            document.getElementById('category-modal').classList.remove('hidden');
        }
        
        // Close category management modal
        function closeCategoryModal() {
            document.getElementById('category-modal').classList.add('hidden');
        }
        
        // Update category list in modal
        function updateCategoryList() {
            const categoryList = document.getElementById('category-list');
            categoryList.innerHTML = '';
            
            // Get unique categories from vocabulary
            const categories = [...new Set(vocabulary.map(word => word.category))];
            
            categories.forEach(category => {
                const wordCount = vocabulary.filter(word => word.category === category).length;
                
                const listItem = document.createElement('li');
                listItem.className = 'flex justify-between items-center p-3 bg-gray-50 rounded-lg';
                listItem.innerHTML = `
                    <div>
                        <span class="font-medium">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                        <span class="text-sm text-gray-500 ml-2">(${wordCount} words)</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900 edit-category-btn" data-category="${category}" aria-label="Edit category">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-600 hover:text-red-900 delete-category-btn" data-category="${category}" aria-label="Delete category">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                categoryList.appendChild(listItem);
            });
            
            // Add event listeners to category buttons
            document.querySelectorAll('.edit-category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.closest('button').getAttribute('data-category');
                    editCategory(category);
                });
            });
            
            document.querySelectorAll('.delete-category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.closest('button').getAttribute('data-category');
                    openDeleteCategoryModal(category);
                });
            });
            
            // Update category options in select boxes
            updateCategoryOptions(categories);
        }
        
        // Add new category
        function addNewCategory() {
            const newCategoryInput = document.getElementById('new-category-input');
            const newCategory = newCategoryInput.value.trim().toLowerCase();
            
            if (newCategory === '') return;
            
            // Check if category already exists
            const existingCategories = [...new Set(vocabulary.map(word => word.category))];
            if (existingCategories.includes(newCategory)) {
                alert('This category already exists!');
                return;
            }
            
            // Add a sample word with new category
            vocabulary.push({
                english: "New word",
                pronunciation: "",
                thai: "คำใหม่",
                thaiPronunciation: "",
                category: newCategory,
                example: "",
                thaiExample: "",
                mastered: false,
                bookmarked: false
            });
            
            // Update displays
            updateCategoryList();
            updateWordList();
            updateAdminWordList();
            updateCategorySelectors();
            
            // Save to local storage
            saveToLocalStorage();
            
            // Clear input
            newCategoryInput.value = '';
        }
        
        // Edit category
        function editCategory(oldCategory) {
            const newCategory = prompt('Enter new category name:', oldCategory);
            
            if (!newCategory || newCategory.trim() === '' || newCategory.trim().toLowerCase() === oldCategory) {
                return;
            }
            
            // Check if category already exists
            const existingCategories = [...new Set(vocabulary.map(word => word.category))];
            if (existingCategories.includes(newCategory.trim().toLowerCase())) {
                alert('This category already exists!');
                return;
            }
            
            // Update category for all words
            vocabulary.forEach(word => {
                if (word.category === oldCategory) {
                    word.category = newCategory.trim().toLowerCase();
                }
            });
            
            // Update displays
            updateCategoryList();
            updateWordList();
            updateAdminWordList();
            updateCategorySelectors();
            
            // Save to local storage
            saveToLocalStorage();
        }
        
        // Open delete word confirmation modal
        function openDeleteWordModal(index) {
            const word = vocabulary[index];
            
            document.getElementById('delete-message').textContent = `Are you sure you want to delete the word "${word.english}"?`;
            document.getElementById('confirm-delete-btn').setAttribute('data-type', 'word');
            document.getElementById('confirm-delete-btn').setAttribute('data-index', index);
            
            document.getElementById('delete-confirm-modal').classList.remove('hidden');
        }
        
        // Open delete category confirmation modal
        function openDeleteCategoryModal(category) {
            const wordCount = vocabulary.filter(word => word.category === category).length;
            
            document.getElementById('delete-message').textContent = 
                `Are you sure you want to delete the category "${category}"? This will delete ${wordCount} words.`;
            document.getElementById('confirm-delete-btn').setAttribute('data-type', 'category');
            document.getElementById('confirm-delete-btn').setAttribute('data-category', category);
            
            document.getElementById('delete-confirm-modal').classList.remove('hidden');
        }
        
        // Close delete confirmation modal
        function closeDeleteModal() {
            document.getElementById('delete-confirm-modal').classList.add('hidden');
        }
        
        // Confirm deletion
        function confirmDelete() {
            const deleteType = document.getElementById('confirm-delete-btn').getAttribute('data-type');
            
            if (deleteType === 'word') {
                const index = parseInt(document.getElementById('confirm-delete-btn').getAttribute('data-index'));
                deleteWord(index);
            } else if (deleteType === 'category') {
                const category = document.getElementById('confirm-delete-btn').getAttribute('data-category');
                deleteCategory(category);
            }
            
            closeDeleteModal();
        }
        
        // Delete word
        function deleteWord(index) {
            // Remove word from vocabulary
            vocabulary.splice(index, 1);
            
            // Update displays
            updateFilteredVocabulary();
            updateWordList();
            updateAdminWordList();
            updateStats();
            
            // Save to local storage
            saveToLocalStorage();
        }
        
        // Delete category and all words in it
        function deleteCategory(category) {
            // Remove all words with this category
            const newVocabulary = vocabulary.filter(word => word.category !== category);
            vocabulary.length = 0;
            vocabulary.push(...newVocabulary);
            
            // Update displays
            updateFilteredVocabulary();
            updateWordList();
            updateAdminWordList();
            updateCategoryList();
            updateStats();
            updateCategorySelectors();
            
            // Save to local storage
            saveToLocalStorage();
        }
        
        // Update category options in select boxes
        function updateCategoryOptions(categories) {
            const categorySelects = [
                document.getElementById('category-select'),
                document.getElementById('category-input')
            ];
            
            categorySelects.forEach(select => {
                // Save current selection
                const currentValue = select.value;
                
                // Clear options except for "All Categories" if present
                const options = Array.from(select.options);
                
                if (select.id === 'category-select') {
                    // For the filter dropdown, keep the "All Categories" option
                    select.innerHTML = '<option value="all">All Categories</option>';
                } else {
                    // For the input form, clear all and add a placeholder
                    select.innerHTML = '<option value="">Select a category</option>';
                }
                
                // Add category options
                categories.sort().forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                    select.appendChild(option);
                });
                
                // Restore selection if possible
                if (categories.includes(currentValue) || currentValue === 'all' || currentValue === '') {
                    select.value = currentValue;
                } else {
                    // Default to "All Categories" or empty
                    select.value = select.id === 'category-select' ? 'all' : '';
                }
            });
        }
        
        // Update all category selectors
        function updateCategorySelectors() {
            const categories = [...new Set(vocabulary.map(word => word.category))];
            updateCategoryOptions(categories);
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>